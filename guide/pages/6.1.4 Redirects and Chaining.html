<html>
     <head>
     	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
     	<title>6.1.4 Redirects and Chaining</title>
     	<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8">
     </head>
	<body class="body">
		<h4>Redirects(리다이렉트)</h4><p class="paragraph"/><a href="../ref/Controllers/redirect.html" class="controllers">redirect</a> 메소드를 사용하여 액션을 리다이렉트(redirect)시킬 수 있다:<p class="paragraph"/><div class="code"><pre>class OverviewController &#123;
    def login = &#123;&#125;<p class="paragraph"/>    def find = &#123;
        <span class="java&#45;keyword">if</span>(!session.user)
           redirect(action:login)
        &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/>내부적으로 <a href="../ref/Controllers/redirect.html" class="controllers">redirect</a>는 <a href="http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/http/HttpServletResponse.html" class="api">HttpServletResonse</a>객체의 <code>sendRedirect</code> 메소드를 사용한다:<p class="paragraph"/>
<code>redirect</code> 메소드로 다음과 같은 일을 할 수 있다:
<ul class="star">
<li>동일한 컨트롤러 클래스에서 다른 클로저로 리다이렉트 시킬 수 있다:</li>
</ul><p class="paragraph"/><div class="code"><pre>// 동일한 클래스의 login 액션을 호출한다
redirect(action:login)</pre></div>
<ul class="star">
<li>다른 컨트롤러와 액션으로 리다이렉트 시킬 수 있다:</li>
</ul><p class="paragraph"/><div class="code"><pre>// home 컨트롤러의 index 액션으로 리다이렉트된다
redirect(controller:'home',action:'index')</pre></div>
<ul class="star">
<li>어플리케이션 컨텍스트 경로의 하위에 있는 리소스의 URI로 리다이렉트 시킬 수 있다:</li>
</ul><p class="paragraph"/><div class="code"><pre>// 명시한 URI로 리다이렉트된다
redirect(uri:<span class="java&#45;quote">"/login.html"</span>)</pre></div>        
<ul class="star">
<li>URL로도 가능하다:</li>
</ul><p class="paragraph"/><div class="code"><pre>// 다른 사이트의 페이지로 리다아렉트 시킨다
redirect(url:<span class="java&#45;quote">"http://grails.org"</span>)</pre></div><p class="paragraph"/>메소드의 <code>params</code> 인자를 사용하여 액션에 파라미터를 넘길 수 있다:<p class="paragraph"/><div class="code"><pre>redirect(action:myaction, params:&#91;myparam:<span class="java&#45;quote">"myvalue"</span>&#93;)</pre></div><p class="paragraph"/>
이 파라미터들은 요청 파리미터에 접근할 수 있는 <a href="../ref/Controllers/params.html" class="controllers">params</a>라는 동적 프로퍼티을 통해서 이용할 수 있다. 만약 어떤 파리마티의 이름이 요청 파라미터와 동일하다면 요청 파라미터는 덮어 씌여져서(is overridden) 컨트롤러의 파라미터가 사용된다.<p class="paragraph"/><code>params</code> 객체는 맵이기 때문에 현재의 요청 파라미터를 다음 액션에 그대로 넘길 수 있다:<p class="paragraph"/><div class="code"><pre>redirect(action:<span class="java&#45;quote">"next"</span>, params:params)</pre></div><p class="paragraph"/><h4>Chaining(체이닝)</h4><p class="paragraph"/>액션은 연쇄적으로 묶일 수 있다. 체이닝은 한 액션에서 다음 액션까지 모델이 유지되도록 해준다. 다음 예제의 <code>first</code> 액션이 호출되면:<p class="paragraph"/><div class="code"><pre>class ExampleChainController &#123;
    def first = &#123;
        chain(action:second,model:&#91;one:1&#93;)
    &#125;
    def second  = &#123;
        chain(action:third,model:&#91;two:2&#93;)
    &#125;
    def third = &#123;
         &#91;three:3&#93;
    &#125;
&#125;</pre></div><p class="paragraph"/>
모델의 최종결과는 다음과 같다:<p class="paragraph"/><div class="code"><pre>&#91;one:1, two:2, three:3&#93;</pre></div><p class="paragraph"/>
모델은 <code>chainModel</code> 맵을 사용하여 다음에 실행되는 컨트롤러의 액션에서도 사용될 수 있다. 다음 예제처럼 액션에서만 이 동적 프로퍼티를 사용할 수 있고 <code>chain</code> 메소드를 호출한다:<p class="paragraph"/><div class="code"><pre>class ChainController &#123;<p class="paragraph"/>    def nextInChain = &#123;
        def model = chainModel.myModel
        &#8230;
    &#125;
&#125;</pre></div><p class="paragraph"/><code>redirect</code> 메소드처럼 <code>chain</code> 메소드에서도 파라미터를 넘길 수 있다:<p class="paragraph"/><div class="code"><pre>chain(action:<span class="java&#45;quote">"action1"</span>, model:&#91;one:1&#93;, params:&#91;myparam:<span class="java&#45;quote">"param1"</span>&#93;)</pre></div><p class="paragraph"/>

	</body>
</html>