<html>
     <head>
     	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
     	<title>5.3.3 Understanding Cascading Updates and Deletes</title>
     	<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8">
     </head>
	<body class="body">
		GORM을 사용할 때 연쇄(Cascade) 갱신과 삭제가 어떻게 동작하는 지를 이해하는 것은 중요하다. 클래스가 관계를 "소유"하는 것을 제어하는 <code>belongsTo</code> 설정이 우리가 기억해야 할 핵심이다.<p class="paragraph"/>일대일, 일대다, 다대다 관계에 상관없이 <code>belongsTo</code>를 정의했다면 갱신과 삭제는 소유한 클래스에서 그 소유물(관계의 다른 쪽)까지 연쇄적으로 동작할 것이다.<p class="paragraph"/>_belongsTo를 정의하지 않으면_ 연쇄 작업은 일어나지 않으며 모든 객체를 일일이 손수 저장해야 한다.<p class="paragraph"/>여기에 한 예가 있다.<p class="paragraph"/><div class="code"><pre>class Airport &#123;
	<span class="java&#45;object">String</span> name
	<span class="java&#45;keyword">static</span> hasMany = &#91;flights:Flight&#93;
&#125;
class Flight &#123;
	<span class="java&#45;object">String</span> number
	<span class="java&#45;keyword">static</span> belongsTo = &#91;airport:Airport&#93;
&#125;</pre></div><p class="paragraph"/><code>Airport</code>를 생성하고 <code>Flight</code>를 몇 개 추가한 후 <code>Airport</code>를 저장하면 <code>Flight</code>도 연쇄적으로 저장된다. 결국 생성한 모든 객체가 저장된다.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">new</span> Airport(name:<span class="java&#45;quote">"Gatwick"</span>)
	 .addToFlights(<span class="java&#45;keyword">new</span> Flight(number:<span class="java&#45;quote">"BA3430"</span>))
	 .addToFlights(<span class="java&#45;keyword">new</span> Flight(number:<span class="java&#45;quote">"EZ0938"</span>))
	 .save()</pre></div><p class="paragraph"/>반대로 <code>Airport</code>를 삭제하면 관련된 모든 <code>Flight</code>도 삭제될 것이다.<p class="paragraph"/><div class="code"><pre>def airport = Airport.findByName(<span class="java&#45;quote">"Gatwick"</span>)
airport.delete()</pre></div><p class="paragraph"/>그러나 <code>belongsTo</code>를 제거하면 위의 코드는 더 이상 연쇄적으로 삭제하지 않는다. <a href="../guide/single.html#5.5.2 Custom ORM Mapping" class="guide">ORM DSL</a>을 사용하여 연쇄 행동을 제어할 수 있다.

	</body>
</html>